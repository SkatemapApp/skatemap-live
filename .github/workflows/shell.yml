name: Shell Script Formatting
permissions:
  contents: read

on:
  push:
    branches: [ master ]
    paths:
      - '**/*.sh'
      - '.github/workflows/shell.yml'
  pull_request:
    branches: [ master ]
    paths:
      - '**/*.sh'
      - '.github/workflows/shell.yml'

jobs:
  formatting:

    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v5

    - name: Install shfmt
      run: |
        wget -O /tmp/shfmt https://github.com/mvdan/sh/releases/download/v3.8.0/shfmt_v3.8.0_linux_amd64
        chmod +x /tmp/shfmt
        sudo mv /tmp/shfmt /usr/local/bin/shfmt

    - name: Check shell script formatting
      run: |
        echo "Checking shell script formatting..."
        shfmt -i 2 -d .
